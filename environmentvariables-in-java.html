<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Environment Variables in Java</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Fullstack Developer, Msc. Computer Engineer" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/environmentvariables-in-java" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Özgün ÖZ" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Environment Variables in Java" />
    <meta property="og:description" content="This post gives an overview of the different ways to manage configuration parameters for software applications in general, and focuses on the management of secrets with environment variables for applications written in java. All modern production applications have some parameters/configurations to allow maximum flexibility of its execution. There are different" />
    <meta property="og:url" content="/environmentvariables-in-java" />
    <meta property="og:image" content="/assets/images/Secret-Protection.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta property="article:author" content="https://www.facebook.com/ghost" />
    <meta property="article:published_time" content="2023-08-30T12:18:00+02:00" />
    <meta property="article:modified_time" content="2023-08-30T12:18:00+02:00" />
    <meta property="article:tag" content="Development" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Environment Variables in Java" />
    <meta name="twitter:description" content="This post gives an overview of the different ways to manage configuration parameters for software applications in general, and focuses on the management of secrets with environment variables for applications written in java. All modern production applications have some parameters/configurations to allow maximum flexibility of its execution. There are different" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/Secret-Protection.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Özgün ÖZ" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Development" />
    <meta name="twitter:site" content="@tryghost" />
    <meta name="twitter:creator" content="@tryghost" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Özgün ÖZ",
        "logo": "/assets/images/blog-icon.png"
    },
    "url": "/environmentvariables-in-java",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/Secret-Protection.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/environmentvariables-in-java"
    },
    "description": "This post gives an overview of the different ways to manage configuration parameters for software applications in general, and focuses on the management of secrets with environment variables for applications written in java. All modern production applications have some parameters/configurations to allow maximum flexibility of its execution. There are different"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Environment Variables in Java" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Blog</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About Me</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            <a class="social-link social-link-tw" href="https://www.linkedin.com/in/%C3%B6zg%C3%BCn-%C3%B6z-954a8b20/" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" /></svg></a>
            <a class="social-link social-link-tw" href="https://github.com/HomeOfTheWizard" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" /></svg></a>
            <a class="social-link social-link-tw" href="https://stackoverflow.com/users/1594088" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15 21h-10v-2h10v2zm6-11.665l-1.621-9.335-1.993.346 1.62 9.335 1.994-.346zm-5.964 6.937l-9.746-.975-.186 2.016 9.755.879.177-1.92zm.538-2.587l-9.276-2.608-.526 1.954 9.306 2.5.496-1.846zm1.204-2.413l-8.297-4.864-1.029 1.743 8.298 4.865 1.028-1.744zm1.866-1.467l-5.339-7.829-1.672 1.14 5.339 7.829 1.672-1.14zm-2.644 4.195v8h-12v-8h-2v10h16v-10h-2z" /></svg></a>
            <a class="social-link social-link-tw" href="https://www.instagram.com/ozgunnoz" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" /></svg></a>
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-development tag-java post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="30 August 2023">30 August 2023</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/development/'>DEVELOPMENT</a>,
                            
                        
                            
                               <a href='/tag/java/'>JAVA</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Environment Variables in Java</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/Secret-Protection.jpg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>This post gives an overview of the different ways to manage configuration parameters for software applications in general, and focuses on the management of secrets with environment variables for applications written in java.</p>

<p>All modern production applications have some parameters/configurations to allow maximum flexibility of its execution. 
There are different ways to manage those parameters, as there are different type of parameters, 
as there are different type of processes/applications that can run as on a Server. 
We will cover all those type of parameters, for the scope of a java application, in detail further below this post. 
The catch here is that the parameters of an application is usually managed separately than the code that will be packaged as the executable.<br />
A good reading about the why’s and how’s is the post from <strong><a href="https://12factor.net/config">12 factor app</a></strong></p>

<p>Many applications today manages some configuration/parameters that needs to be kept secret, aka <em>secrets</em>. 
Sometimes it is the credentials to access a DB, some other times it is the key to encrypt a communication with another application. 
Different from other parameter/config, these values must be stored and managed by the application carefully in order to prevent their leak.</p>

<p>First lets see the different ways to pass application parameters in a java, then we will focus on the best practices to do so for secrets specifically.</p>

<h1> Arguments ? Properties ? Variables ? </h1>
<p>As a junior, or even an experienced developer you may sometimes confuse one for the other if you never had to deal with the subtle differences.
We will cover all those in details, and have a resumé of differences at the end.</p>

<h3>1. Program Arguments</h3>
<p>Program arguments in java are the parameters you provide when running your java application. They are also called command-line arguments. Here is how you can use it:</p>

<p>Lets say you have a main class like so;</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Echo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="nl">s:</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Now when you package your application as a jar, and you run it, you can pass arguments like so.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">java <span class="nt">-jar</span> MyApplication.jar paramStr1 paramStr2</code></pre></figure>

<p>The arguments you pass after the jar file will be given to your main method as String parameters. <br />
If you want to change the type of the argument, you need to parse of cast the String object.<br />
Note that since we are talking about running our application in command line, only String parameters makes sense in that context.</p>

<h3>2. JVM arguments</h3>
<p>When we execute a java program from the command line, using the <code>java</code> executable from the JRE lib, we can pass multiple <em>Options</em> to the JVM. <br />
The <code>java -jar</code> option is only one of them.</p>

<p>It is easy to confuse them with Program arguments, since they are also sometimes called <em>JVM arguments</em>.
Different from Program args, JVM args are passed to the JVM directly and are meant to modify its behaviour. The most known usage is to set the maximum Heap size <code>-Xmx</code> flag.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">java <span class="nt">-jar</span> <span class="nt">-Xmx</span><span class="o">=</span>2g MyApplication.jar paramStr1 paramStr2</code></pre></figure>

<p>A full list of options for the Hotspot JVM is available <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">here</a> along the standard options that are general to all JVMs.</p>

<h3>3. System Properties</h3>
<p>A specific type of JVM argument allows you to set the properties of the JVM, called <a href="https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html">System Properties</a>. 
Note that <code>-DsystemProperty1=myStrPropValue</code> below is a JVM argument given with the <code>-D</code> flag.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">java <span class="nt">-jar</span> <span class="nt">-DmySystemProperty</span><span class="o">=</span>mySysPropValue MyApplication.jar paramStr1 paramStr2</code></pre></figure>

<p>Those properties are available from all applications and sub-processes running in the JVM execution. Some predefined properties gives info about the current execution context of your JVM. They can be used in a Java application like so:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">var</span> <span class="n">sysProps</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">();</span>
<span class="kt">var</span> <span class="n">pathSeperator</span> <span class="o">=</span> <span class="n">sysProps</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"path.separator"</span><span class="o">);</span>
<span class="n">sysProps</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"myCustomProperty"</span><span class="o">,</span> <span class="err">"</span><span class="n">myPropertyValue</span><span class="o">);</span></code></pre></figure>

<p>Beware that setting new Properties or overriding an existing one will be persistent only during the current execution of the JVM and will be deleted once JVM shuts down.
System Properties, like all <a href="https://docs.oracle.com/en/java/javase/17/docs/api/index.html">Properties</a> objects are mere objects available in the Heap and their value is not persisted anywhere on the disk.</p>

<h3>4. Environment Variables</h3>
<p>Environment variables are nothing specific to Java. They are actually set outside the context of our JVM execution. 
They are variables defined on the OS level and are available to all processes (unless we define availability constraints on them).
They are available in all Linux based systems and Windows (with subtle differences). You can this <a href="https://en.wikipedia.org/wiki/Environment_variable">wiki page</a> or this <a href="https://www.twilio.com/blog/how-to-set-environment-variables.html">blog post</a> how to set them.</p>

<p>To access and use them in java applications like so</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">var</span> <span class="n">envVars</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">();</span>
<span class="kt">var</span> <span class="n">shell</span> <span class="o">=</span> <span class="n">envVars</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"SHELL"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The current Shell type is: "</span> <span class="o">+</span> <span class="n">shell</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The current Operating System is: "</span> <span class="o">+</span> <span class="nc">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"OS"</span><span class="o">));</span></code></pre></figure>

<p><em>Keep in mind that different platforms operate in different ways, e.g., on UNIX, Linux, and macOS, environment variables are case-sensitive, whereas on Microsoft Windows they are not.</em></p>

<p><em>In a java application, we can use environment variables available to our JVM process. But Java does not have a standard way to modify its environment. This is a decision taken to make the language and application portable. and its design isolated from its execution environment.</em></p>

<h3>5. Properties specific to Frameworks</h3>
<p>If you are using spring or maven, you probably heard about things like (respectively) application properties or project properties.</p>

<h6>Spring application properties</h6>
<p>The best description comes from the official <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config">docs</a>:</p>
<blockquote>
<p>Spring Boot lets you externalize your configuration so that you can work with the same application code in different environments. You can use a variety of external configuration sources including Java properties files, YAML files, environment variables, and command-line arguments.</p>
<p>Property values can be injected directly into your beans by using the @Value annotation, accessed through Spring’s Environment abstraction, or be bound to structured objects through @ConfigurationProperties.</p>
</blockquote>

<p>As described above the @Value/@ConfigurationProperties annotations allow you to use these application parameters in your code. The most commonly used way of defining those parameters is an application.properties/.yaml file. But it is not the only way. Spring have multiple ways/places to define those properties and with an order of priority to allow overriding one defined in another. You can find the detailed list of hierarchy in the official documentation.  <br />
One of them that you should not confuse with System properties, are spring program arguments. You can add application properties them from cli like so <code class="language-plaintext highlighter-rouge">java -jar mySpringApp.jar --someProperty=someValue</code> (see <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.command-line-args">here</a> for more details).</p>

<p>The already explained configuration parameters like JVM arguments, system properties and environment variables can be sourced to define the spring application properties and used via the respective annotations.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Value</span><span class="o">(</span><span class="s">"#{systemEnvironment['MY_SECRET']}"</span><span class="o">)</span> <span class="c1">// via environment variables</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">s1</span><span class="o">;</span>

<span class="nd">@Value</span><span class="o">(</span><span class="s">"#{systemProperties['myApp.mySystemProperty']}"</span><span class="o">)</span> <span class="c1">// via System properties passed in cli:  java -jar -DmyApp.mySystemProperty=someVal mySpringApp.jar </span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">s2</span>

<span class="nd">@Value</span><span class="o">(</span><span class="s">"${myApp.myAppProperty:aDefaultValue}"</span><span class="o">)</span> <span class="c1">// via application.property file or other PropertySource definition</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">s3</span><span class="o">;</span></code></pre></figure>

<p>if you are using spring boot, you can directly use the following syntax to access env variables and system properties</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Value</span><span class="o">(</span><span class="s">"${MY_SECRET:aDefaultValue}"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">s1</span><span class="o">;</span>
<span class="nd">@Value</span><span class="o">(</span><span class="s">"${myJVM.mySystemProperty:aDefaultValue}"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">s2</span><span class="o">;</span></code></pre></figure>

<p>Or a cleaner and simpler way, just define them in the same place as other application properties, like in your application.properties/.yaml file
Then access those properties via the @Value annotation with a simpler expression.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">myApp.mySecretIndirect<span class="o">=</span><span class="k">${</span><span class="nv">MY_SECRET</span>:aDefaultValue<span class="k">}</span>
myApp.mySysPropIndirect<span class="o">=</span><span class="k">${</span><span class="nv">myJVM</span><span class="p">.myProperty</span>:aDefaultValue<span class="k">}</span>
myApp.myAppProperty<span class="o">=</span>SomeValue</code></pre></figure>

<h6>Maven properties</h6>
<p>Again from the official <a href="https://maven.apache.org/pom.html#properties">docs</a>:</p>
<blockquote>
<p>Maven properties are value placeholders, like properties in Ant. Their values are accessible anywhere within a POM by using the notation ${X}, where X is the property. Or they can be used by plugins as default values</p>
</blockquote>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;project&gt;</span>
  ...
  <span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;maven.compiler.source&gt;</span>1.7<span class="nt">&lt;/maven.compiler.source&gt;</span>
    <span class="nt">&lt;maven.compiler.target&gt;</span>1.7<span class="nt">&lt;/maven.compiler.target&gt;</span>
    <span class="c">&lt;!-- Following project.-properties are reserved for Maven in will become elements in a future POM definition. --&gt;</span>
    <span class="c">&lt;!-- Don't start your own properties properties with project. --&gt;</span>
    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span> 
    <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
  <span class="nt">&lt;/properties&gt;</span>
  ...
<span class="nt">&lt;/project&gt;</span></code></pre></figure>

<p>And again like the above spring properties, maven properties can as well be sourced from the basic java configuration parameters like JVM arguments, system properties and environment variables.<br />
Once defined, you can use them with the below syntax.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;properties&gt;</span>
    <span class="c">&lt;!-- environment variable --&gt;</span>
    <span class="nt">&lt;myApp.githubPAT&gt;</span>${env.MY_GITHUB_PAT}<span class="nt">&lt;/myApp.githubPAT&gt;</span>
    <span class="c">&lt;!-- JVM system properties --&gt;</span>
    <span class="nt">&lt;myApp.javaPath&gt;</span>${java.home}<span class="nt">&lt;/myApp.javaPath&gt;</span>
    <span class="nt">&lt;myApp.OS&gt;</span>${os.name}<span class="nt">&lt;/myApp.OS&gt;</span>
    <span class="c">&lt;!-- JVM System properties , you can give custom ones on cli "mvn -DmyApp.logging.path=... clean install" and access them in pom like normal properties --&gt;</span>
    <span class="nt">&lt;myApp.logging.file&gt;</span>${myApp.logging.path}/myApp.log<span class="nt">&lt;/myApp.logging.file&gt;</span>
    <span class="c">&lt;!-- maven predefined properties --&gt;</span>
    <span class="nt">&lt;myApp.execId&gt;</span>myApp-${maven.build.timestamp}<span class="nt">&lt;/myApp.execId&gt;</span>
    <span class="nt">&lt;jacoco.unit.file&gt;</span>${project.build.directory}/jacoco-unit.exec<span class="nt">&lt;/jacoco.unit.file&gt;</span>
    <span class="c">&lt;!-- user defined property --&gt;</span>
    <span class="nt">&lt;version.jacoco&gt;</span>0.8.7<span class="nt">&lt;/version.jacoco&gt;</span>
    <span class="nt">&lt;version.jacoco.plugin&gt;</span>${version.jacoco}<span class="nt">&lt;/version.jacoco.plugin&gt;</span>
<span class="nt">&lt;/properties&gt;</span></code></pre></figure>

<p>If you are interested in going more into the details of maven, the blog post <a href="./maven_sisu">here</a> is a good article to start with.</p>

<h3>6. Resumé </h3>
<p>If we take those words and analyse the literal meanings outside the scope of programming, we already have a hint of their differences.<br />
<a href="https://en.wikipedia.org/wiki/Command-line_interface#Arguments">Arguments</a> ?  Short for “arguments of a command line expression”. <br />
<a href="https://www.oxfordlearnersdictionaries.com/definition/american_english/property#:~:text=1%5Buncountable%5D%20a%20thing%20or,intellectual%20property%2C%20public%20property%20Thesaurus">Properties</a> ? They are values that defines something.<br />
<a href="https://www.oxfordlearnersdictionaries.com/definition/english/variable_1?q=variable">Variables</a> ? Something that can change outside our will.</p>

<ol>
<li>Program Arguments: String Parameters we pass to our main method. Must be given set startup.</li> 
<li>JVM Arguments: Options that affect how the JVM operates. Must be given set startup.</li> 
<li>System Properties: Value/Keys available in every application running in the JVM. Can be set via command line, or by the code of the java application.</li>
<li>Environment Variables: Values that are set outside the execution of the JVM and cannot be changed by the JVM.</li>
</ol>

<p><img src="../assets/images/JavaPropsVarsArgs.png" /></p>

<h1> Secrets ?</h1>
<p>Now lets get back to the focus element of this post. The credentials in our configuration, aka. secrets.</p>

<p>There are different methods to give secret values as parameters to an application.
The most basic and old way, is to have the credentials stored in a configuration file only a server we consider secure, and we limit all access to it. Like the production server.
For applications that run on bare metal or VMs, this is most often the chosen method.</p>

<p>Just to give a glimpse of some best practices used today without diving into too much details since it is not the subject of this blog post,
If you are using deployment tools like ansible, you can profit from features like <a href="https://docs.ansible.com/ansible/latest/vault_guide">Ansible Vault</a>.</p>

<p><img src="../assets/images/hashicorp_ansible_jenkins_vm.png" /></p>

<p>It allows you to encrypt them with a key so your secret file that is encrypted may even be pushed on version control.
It will then decrypt them on the fly during deployment.
So only the decryption key is needed to be managed during the deployment and execution of the application.
The encryption key is the real secret here and can be stored in your CI tool that will launch the deployments, or you can use a secret manager like <a href="https://www.vaultproject.io/">Hashicorp Vault</a> to keep your secrets.
Most CI tools, like jenkins have <a href="https://plugins.jenkins.io/hashicorp-vault-plugin/">plugins</a>, allowing to communicate with HashiCorp Vault to fetch your secrets during your pipeline execution instead of storing them on the CI server.</p>

<div class="alert">
    <div style="margin-left: 0.7em;">
        <!--<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
        </svg>--> 
        Warning:
        <em>The most secure way to manage secrets is not to persist them at all apart anywhere we consider secure.
        Duplicating the places where you persist the secret widens the attack surface and increase the risk of leak of the secret.</em>
    </div>
</div>

<h3> Secrets accessible to the JVM from Environment Variables </h3>
<p>Application execution environments are considered not secure since it is a place we do regular changes. Lots of ins and outs, difficult to track and secure.
This is why key management applications, like HashiCorp Vault has come into being. Their only purpose is to store your secrets.</p>

<p>Execution environments like containers have the advantage of being ephemeral which in turns makes the fact of having the secrets accessible on the execution environment more secure. 
Making them accessible via environment variables instead of a config file persisted on the FS is considered relatively more secure. 
There are still some concerns about this approach in general ( <a href="https://www.cloudtruth.com/blog/the-pitfalls-of-using-environment-variables-for-config-and-secrets">one</a> or <a href="https://www.trendmicro.com/en_za/research/22/h/analyzing-hidden-danger-of-environment-variables-for-keeping-secrets.html">two</a> among other tones of discussion on platforms like stackexchange and stackoverflow, of blog posts are available on the net)
but most known Container Execution Environment Providers like Docker and Kubernetes has components (<a href="https://kubernetes.io/docs/concepts/configuration/secret/">etcd</a> for K8s) that are considered relatively secure to store the secrets for you.
Kubernetes has even a HashiCorp Vault <a href="https://www.vaultproject.io/use-cases/kubernetes">plugin</a> that allows fetching the secrets from Vault and injecting into the pods, instead of storing them in etcd.</p>

<p><img src="../assets/images/hashicorp_jenkins_kubernetes.png" /></p>

<p>Plus, this option has the advantage of being able to put all the configurations related to your application to version control (recommended by the <a href="https://7factorconfig.org/">7 factor config</a>).
The only thing to manage in the execution environment is the credentials to access to Vault.</p>

<h3> Secrets injected directly into the JVM from Secret Manager </h3>
<p>If we compare the above methods:</p>
<ol>
  <li>The first approach with bare metal VMs force us to handle secrets manually, while the second automates the injection of the secrets to the application runtime environment.</li>
  <li>But the second still force us to administrate the access to the vault from the runtime environments of our application.<br />
For example we have to use specific plugins/tools/agents for each environment to access to the Vault and fetch secrets.</li>
</ol>

<p>Frameworks like <a href="https://cloud.spring.io/spring-cloud-vault/reference/html/">spring-cloud-vault</a> or tools like <a href="https://homeofthewizard.github.io/vault-maven-plugin/">maven-vault-plugin</a> allows the JVM to fetch the secrets directly from the HashiCorp Vault.<br />
They are pure Java solutions so you do not have to install anything specific to the execution environment, so can be used even in development environments.<br />
Plus your secrets are not persisted anywhere, but exists only in memory of your application.</p>

<h1> Appendix: References </h1>
<p>https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html  <br />
https://docs.oracle.com/javase/tutorial/essential/environment/index.html<br />
https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html  <br />
https://7factorconfig.org/ <br />
https://12factor.net/ <br />
https://www.twilio.com/blog/working-with-environment-variables-in-java
https://betterdev.blog/command-line-arguments-anatomy-explained/
https://developer.hashicorp.com/vault/docs/agent-and-proxy/agent<br />
https://security.stackexchange.com/questions/197784/is-it-unsafe-to-use-environmental-variables-for-secret-data<br />
https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config<br />
https://docs.spring.io/spring-framework/reference/core/beans/annotation-config/value-annotations.html</p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Özgün ÖZ</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/ozgun.jpg" alt="oz" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/oz">Özgün ÖZ</a></h4>
                                
                                    <p>A mere software engineer, aka modern wizard.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/oz">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = '/environmentvariables-in-java';
                            var this_page_identifier = '/environmentvariables-in-java';
                            var this_page_title = 'Environment Variables in Java';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://HomeOfTheWizard.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Özgün ÖZ &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/development/">Development</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/maven_sisu">Understanding Maven core for plugin Development</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/clickhouse101_1">Clickhouse 101 - Data Structures and internals</a></li>
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/development/">
                                
                                    See all 2 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/maven_sisu">
                <div class="post-card-image" style="background-image: url(/assets/images/maven.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/maven_sisu">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Development</span>
                            
                        
                            
                                <span class="post-card-tags">Java</span>
                            
                        
                    

                    <h2 class="post-card-title">Understanding Maven core for plugin Development</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>Deep dive into maven’s dependency management and classloader system to help the development of plugins
</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/ozgun.jpg" alt="Özgün ÖZ" />
                        
                        <span class="post-card-author">
                            <a href="/author/oz/">Özgün ÖZ</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/clickhouse101_1">
                <div class="post-card-image" style="background-image: url(/assets/images/datastructures.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/clickhouse101_1">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Development</span>
                            
                        
                            
                                <span class="post-card-tags">System</span>
                            
                        
                    

                    <h2 class="post-card-title">Clickhouse 101 - Data Structures and internals</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>First article of the clickhouse 101 series. Let’s deep dive to the underlying data structures and internal mechanisms of clickhouse
</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/ozgun.jpg" alt="Özgün ÖZ" />
                        
                        <span class="post-card-author">
                            <a href="/author/oz/">Özgün ÖZ</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
                <img src="/assets/images/favicon.png" alt="Özgün ÖZ icon" />
            
            <span>Özgün ÖZ</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Environment Variables in Java</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Environment+Variables+in+Java&amp;url=https://homeofthewizard.github.io/environmentvariables-in-java"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://homeofthewizard.github.io/environmentvariables-in-java"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">Özgün ÖZ</a> &copy; 2023</section>

                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://www.linkedin.com/in/%C3%B6zg%C3%BCn-%C3%B6z-954a8b20/" target="_blank" rel="noopener">LinkedIn</a>
                    <a href="https://github.com/HomeOfTheWizard" target="_blank" rel="noopener">Github</a>
                    <a href="https://stackoverflow.com/users/1594088" target="_blank" rel="noopener">StackOverflow</a>
                    <a href="https://www.instagram.com/ozgunnoz" target="_blank" rel="noopener">Instagram</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                    <img class="subscribe-overlay-logo" src="/assets/images/blog-icon.png" alt="Özgün ÖZ" />
                
                <h1 class="subscribe-overlay-title">Subscribe to Özgün ÖZ</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-W7BHPYN5QX', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
